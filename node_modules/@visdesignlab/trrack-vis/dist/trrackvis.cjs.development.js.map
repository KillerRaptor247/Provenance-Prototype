{"version":3,"file":"trrackvis.cjs.development.js","sources":["../src/Utils/findBundleParent.ts","../src/Utils/translate.ts","../src/Utils/TreeLayout.ts","../src/components/Styles.ts","../src/components/BackboneNode.tsx","../src/components/BookmarkNode.tsx","../src/components/BookmarkTransitions.tsx","../src/components/BookmarkListView.tsx","../src/components/LinkTransitions.ts","../src/components/BundleTransitions.tsx","../src/components/Link.tsx","../src/components/NodeTransitions.ts","../src/components/UndoRedoButton.tsx","../src/components/ProvVis.tsx","../src/components/ProvVisCreator.tsx"],"sourcesContent":["import { BundleMap } from './BundleMap';\n\nexport default function findBundleParent(\n  nodeId: string,\n  bundleMap?: BundleMap\n): string[] {\n  const parentList = [];\n  // eslint-disable-next-line no-restricted-syntax\n  for (const bundle in bundleMap) {\n    if (bundleMap[bundle].bunchedNodes.includes(nodeId)) {\n      parentList.push(bundle);\n    }\n  }\n\n  return parentList;\n}\n","export default function translate(x: number, y: number) {\n  return `translate(${x}, ${y})`;\n}\n","import { ProvenanceNode } from '@visdesignlab/trrack';\nimport { HierarchyNode } from 'd3';\nimport { StratifiedMap } from '../components/ProvVis';\n\nexport type TreeNode = HierarchyNode<unknown>;\n\nexport interface ExtendedHierarchyNode<T, S, A>\n  extends HierarchyNode<ProvenanceNode<S, A>> {\n  column: number;\n}\n\nexport type ExtendedStratifiedMap<T, S, A> = {\n  [key: string]: ExtendedHierarchyNode<T, S, A>;\n};\n\nexport function treeLayout<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  current: string,\n  root: string\n) {\n  const depthMap: { [key: string]: any } = {};\n\n  const currentPath = getPathTo(nodes, root, current);\n\n  DFS(nodes, root, depthMap, currentPath);\n\n  return currentPath;\n}\n\nfunction DFS<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  node: string,\n  depthMap: any,\n  currentPath: string[]\n) {\n  const explored = new Set();\n\n  const toExplore = [];\n\n  let currDepth = 0;\n\n  toExplore.push(nodes[node]);\n\n  while (toExplore.length > 0) {\n    const temp: any = toExplore.pop();\n\n    if (!explored.has(temp.id)) {\n      temp.width = currDepth;\n      depthMap[temp.id] = temp.width;\n      explored.add(temp.id);\n    } else {\n      temp.width = depthMap[temp.id];\n    }\n\n    if (temp.children) {\n      toExplore.push(\n        ...temp.children.sort((a: any, b: any) => {\n          const aIncludes = currentPath.includes(a.id) ? 1 : 0;\n          const bIncludes = currentPath.includes(b.id) ? 1 : 0;\n          return aIncludes - bIncludes;\n        })\n      );\n    } else {\n      currDepth += 1;\n    }\n  }\n}\n\nexport function getPathTo<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  from: string,\n  to: string\n): string[] {\n  const path: string[] = [];\n\n  search(nodes, from, to, path);\n\n  return [from, ...path.reverse()];\n}\n\nfunction search<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  node: string,\n  final: string,\n  path: string[]\n) {\n  if (!nodes[node]) return false;\n\n  if (node === final) {\n    path.push(node);\n    return true;\n  }\n\n  const children = nodes[node].children || [];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const child of children) {\n    if (search(nodes, child.id!, final, path)) {\n      path.push(child.id!);\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { style } from 'typestyle';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const treeColor = (current?: boolean) =>\n  style({\n    fill: current ? 'rgb(33, 133, 208)' : 'white',\n    stroke: 'rgb(33, 133, 208)',\n  });\n","/* eslint-disable no-unused-vars */\nimport { Provenance, ProvenanceNode, StateNode } from '@visdesignlab/trrack';\nimport React, { ReactChild, useState } from 'react';\nimport { Animate } from 'react-move';\nimport { Popup } from 'semantic-ui-react';\nimport { BundleMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\nimport translate from '../Utils/translate';\nimport { treeColor } from './Styles';\n\ninterface BackboneNodeProps<T, S extends string, A> {\n  prov: Provenance<T, S, A>;\n  first: boolean;\n  iconOnly: boolean;\n  current: boolean;\n  duration: number;\n  node: StateNode<S, A>;\n  radius: number;\n  strokeWidth: number;\n  textSize: number;\n  setBookmark: any;\n  bookmark: any;\n  nodeMap: any;\n  annotationOpen: number;\n  setAnnotationOpen: any;\n  exemptList: string[];\n  setExemptList: any;\n  bundleMap?: BundleMap;\n  clusterLabels: boolean;\n  editAnnotations: boolean;\n  eventConfig?: EventConfig<S>;\n  popupContent?: (nodeId: StateNode<S, A>) => ReactChild;\n  annotationContent?: (nodeId: StateNode<S, A>) => ReactChild;\n  expandedClusterList?: string[];\n}\n\nfunction BackboneNode<T, S extends string, A>({\n  prov,\n  first,\n  iconOnly,\n  current,\n  node,\n  duration,\n  radius,\n  strokeWidth,\n  textSize,\n  nodeMap,\n  annotationOpen,\n  bookmark,\n  setAnnotationOpen,\n  exemptList,\n  setExemptList,\n  bundleMap,\n  eventConfig,\n  popupContent,\n  editAnnotations,\n  annotationContent,\n  expandedClusterList,\n}: BackboneNodeProps<T, S, A>) {\n  const padding = 15;\n\n  const cursorStyle = {\n    cursor: 'pointer',\n  } as React.CSSProperties;\n\n  const [annotateText, setAnnotateText] = useState(\n    prov.getLatestAnnotation(node.id)?.annotation\n      ? prov.getLatestAnnotation(node.id)?.annotation!\n      : ''\n  );\n\n  const handleCheck = () => {\n    const lastAnnotation = prov.getLatestAnnotation(node.id);\n\n    if (lastAnnotation?.annotation !== annotateText.trim()) {\n      prov.addAnnotation(annotateText, node.id);\n      setAnnotationOpen(-1);\n    }\n  };\n\n  const handleClose = () => {\n    setAnnotateText(prov.getLatestAnnotation(node.id)?.annotation!);\n    setAnnotationOpen(-1);\n  };\n\n  const handleInputChange = () => {};\n\n  // console.log(JSON.parse(JSON.stringify(node)));\n  let glyph = (\n    <circle\n      style={cursorStyle}\n      className={treeColor(current)}\n      r={radius}\n      strokeWidth={strokeWidth}\n    />\n  );\n\n  // let backboneBundleNodes = findBackboneBundleNodes(nodeMap, bundleMap)\n\n  let dropDownAdded = false;\n\n  if (eventConfig) {\n    const { eventType } = node.metadata;\n    if (eventType && eventType in eventConfig && eventType !== 'Root') {\n      const { bundleGlyph, currentGlyph, backboneGlyph } = eventConfig[\n        eventType\n      ];\n      if (bundleMap && Object.keys(bundleMap).includes(node.id)) {\n        dropDownAdded = true;\n        glyph = (\n          <g style={cursorStyle} fontWeight={'none'}>\n            {bundleGlyph}\n          </g>\n        );\n      }\n      if (current) {\n        glyph = (\n          <g style={cursorStyle} fontWeight={'none'}>\n            {currentGlyph}\n          </g>\n        );\n      } else if (!dropDownAdded) {\n        glyph = (\n          <g style={cursorStyle} fontWeight={'none'}>\n            {backboneGlyph}\n          </g>\n        );\n      }\n    }\n  }\n\n  let label = '';\n  let annotate = '';\n\n  // console.log(bundleMap)\n  // console.log(nodeMap[node.id]);\n\n  if (\n    bundleMap &&\n    Object.keys(bundleMap).includes(node.id) &&\n    node.actionType === 'Ephemeral' &&\n    expandedClusterList &&\n    !expandedClusterList.includes(node.id)\n  ) {\n    if (node.metadata && node.metadata.eventType) {\n      label = `[${bundleMap[node.id].bunchedNodes.length}] ${\n        node.metadata.eventType\n      }`;\n    } else {\n      label = `[${bundleMap[node.id].bunchedNodes.length}]`;\n    }\n  } else {\n    label = node.label;\n  }\n\n  if (\n    node.artifacts &&\n    node.artifacts.annotations.length > 0 &&\n    annotationOpen !== nodeMap[node.id].depth\n  ) {\n    annotate = node.artifacts.annotations[0].annotation;\n  }\n\n  if (!nodeMap[node.id]) {\n    return null;\n  }\n\n  if (annotate.length > 20) annotate = `${annotate.substr(0, 20)}..`;\n\n  if (label.length > 20) label = `${label.substr(0, 20)}..`;\n\n  const labelG = (\n    <g style={{ opacity: 1 }} transform={translate(padding, 0)}>\n      {!iconOnly ? (\n        <g>\n          {dropDownAdded ? (\n            <text\n              style={cursorStyle}\n              onClick={(e) => nodeClicked(node, e)}\n              fontSize={17}\n              fill={'rgb(248, 191, 132)'}\n              textAnchor=\"middle\"\n              alignmentBaseline=\"middle\"\n              x={1}\n              y={0}\n              fontFamily=\"Icons\"\n            >\n              {expandedClusterList && expandedClusterList.includes(node.id)\n                ? '\\uf0d8'\n                : '\\uf0d7'}\n            </text>\n          ) : (\n            <g></g>\n          )}\n          {editAnnotations ? (\n            <button>\n              <i className=\"fas fa-undo marginRight\"></i>\n              Undo\n            </button>\n          ) : (\n            <g></g>\n          )}\n          <text\n            y={annotate.length === 0 ? 0 : -7}\n            x={dropDownAdded ? 10 : 0}\n            dominantBaseline=\"middle\"\n            textAnchor=\"start\"\n            fontSize={textSize}\n            fontWeight={'bold'}\n            onClick={() => labelClicked(node)}\n          >\n            {label}\n          </text>\n          ,\n          <text\n            y={7}\n            x={dropDownAdded ? 10 : 0}\n            dominantBaseline=\"middle\"\n            textAnchor=\"start\"\n            fontSize={textSize}\n            fontWeight={'regular'}\n            onClick={() => labelClicked(node)}\n          >\n            {annotate}\n          </text>\n          ,\n          <text\n            style={cursorStyle}\n            onClick={(e) => {\n              prov.setBookmark(node.id, !prov.getBookmark(node.id));\n\n              e.stopPropagation();\n            }}\n            fontSize={17}\n            className=\"fas fa\"\n            opacity={bookmark === node.id || prov.getBookmark(node.id) ? 1 : 0}\n            fill={prov.getBookmark(node.id) ? '#2185d0' : '#cccccc'}\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            x={175}\n            y={0}\n            fontFamily=\"Icons\"\n          >\n            {'\\uf02e'}\n          </text>\n          ,\n          <text\n            style={cursorStyle}\n            onClick={() => {\n              if (\n                annotationOpen === -1 ||\n                nodeMap[node.id].depth !== annotationOpen\n              ) {\n                setAnnotationOpen(nodeMap[node.id].depth);\n              } else {\n                setAnnotationOpen(-1);\n              }\n            }}\n            fontSize={17}\n            opacity={\n              bookmark === node.id || annotationOpen === nodeMap[node.id].depth\n                ? 1\n                : 0\n            }\n            fill={\n              annotationOpen === nodeMap[node.id].depth ? '#2185d0' : '#cccccc'\n            }\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            x={210}\n            y={0}\n            fontFamily=\"Icons\"\n          >\n            {'\\uf044'}\n          </text>\n        </g>\n      ) : (\n        <g>\n          {dropDownAdded ? (\n            <text\n              style={cursorStyle}\n              onClick={(e) => nodeClicked(node, e)}\n              fontSize={17}\n              fill={'rgb(248, 191, 132)'}\n              textAnchor=\"middle\"\n              alignmentBaseline=\"middle\"\n              x={1}\n              y={0}\n              fontFamily=\"Icons\"\n            >\n              {expandedClusterList && expandedClusterList.includes(node.id)\n                ? '\\uf0d8'\n                : '\\uf0d7'}\n            </text>\n          ) : (\n            <g></g>\n          )}\n        </g>\n      )}\n    </g>\n  );\n\n  return (\n    <Animate\n      start={{ opacity: 0 }}\n      enter={{\n        opacity: [1],\n        timing: { duration: 100, delay: first ? 0 : duration },\n      }}\n    >\n      {() => (\n        <>\n          {popupContent !== undefined && nodeMap[node.id].depth > 0 ? (\n            <Popup content={popupContent(node)} trigger={glyph} />\n          ) : (\n            glyph\n          )}\n          {/* {glyph} */}\n\n          {popupContent !== undefined && nodeMap[node.id].depth > 0 ? (\n            <Popup content={popupContent(node)} trigger={labelG} />\n          ) : (\n            labelG\n          )}\n\n          {annotationOpen !== -1 &&\n          nodeMap[node.id].depth === annotationOpen ? (\n            <g transform=\"translate(15, 25)\">\n              <foreignObject width=\"175\" height=\"80\" x=\"0\" y=\"0\">\n                <div>\n                  <textarea\n                    style={{ maxWidth: 130, resize: 'none' }}\n                    onChange={handleInputChange}\n                    value={annotateText}\n                  />\n                  <button onClick={handleCheck}>Annotate</button>\n\n                  <button onClick={handleClose}>Close</button>\n                </div>\n\n                {/* <Input size='massive' icon='close' onChange={handleInputChange}\n                  defaultValue={annotateText.current} placeholder=\"Edit Annotation\" action>\n                    <input />\n                    <Button color=\"green\" type=\"submit\" onClick={handleCheck}>\n                      <Icon name=\"world\"/>\n                    </Button>\n                    <Button color=\"red\" type=\"submit\" onClick={handleClose}>\n                      <Icon name=\"close\"/>\n                    </Button>\n                  </Input> */}\n              </foreignObject>\n            </g>\n          ) : (\n            <g></g>\n          )}\n        </>\n      )}\n    </Animate>\n  );\n\n  function labelClicked(innerNode: ProvenanceNode<S, A>) {\n    if (annotationOpen === nodeMap[innerNode.id].depth && annotationContent) {\n      setAnnotationOpen(-1);\n    } else if (annotationContent) {\n      setAnnotationOpen(nodeMap[innerNode.id].depth);\n    }\n  }\n\n  function nodeClicked(innerNode: ProvenanceNode<S, A>, event: any) {\n    if (bundleMap && Object.keys(bundleMap).includes(innerNode.id)) {\n      const exemptCopy: string[] = Array.from(exemptList);\n\n      if (exemptCopy.includes(innerNode.id)) {\n        exemptCopy.splice(\n          exemptCopy.findIndex((d) => d === innerNode.id),\n          1\n        );\n      } else {\n        exemptCopy.push(innerNode.id);\n      }\n\n      setExemptList(exemptCopy);\n    }\n\n    event.stopPropagation();\n  }\n}\n\nexport default BackboneNode;\n\n// const Label: FC<{ label: string } & React.SVGProps<SVGTextElement>> = (props: {\n//   label: string;\n// }) => {\n//   return <text {...props}>{props.label}</text>;\n// };\n","import { StateNode } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { Animate } from 'react-move';\nimport { EventConfig } from '../Utils/EventConfig';\nimport { treeColor } from './Styles';\n\ninterface BookmarkNodeProps<T, S extends string, A> {\n  current: boolean;\n  node: StateNode<S, A>;\n  nodeMap: any;\n  editAnnotations: boolean;\n  eventConfig?: EventConfig<S>;\n}\n\nfunction BookmarkNode<T, S extends string, A>({\n  current,\n  node,\n  eventConfig,\n}: BookmarkNodeProps<T, S, A>) {\n  const radius = 5;\n  const strokeWidth = 2;\n  const textSize = 15;\n\n  const cursorStyle = {\n    cursor: 'pointer',\n  } as React.CSSProperties;\n\n  let glyph = (\n    <circle\n      style={cursorStyle}\n      className={treeColor(current)}\n      r={radius}\n      strokeWidth={strokeWidth}\n    />\n  );\n\n  const dropDownAdded = false;\n  const { eventType } = node.metadata;\n\n  if (eventConfig) {\n    const { currentGlyph, backboneGlyph } = eventConfig[eventType];\n\n    if (current) {\n      glyph = (\n        <g style={cursorStyle} fontWeight={'none'}>\n          {currentGlyph}\n        </g>\n      );\n    } else {\n      glyph = (\n        <g style={cursorStyle} fontWeight={'none'}>\n          {backboneGlyph}\n        </g>\n      );\n    }\n  }\n\n  let label = '';\n  let annotate = '';\n\n  if (\n    node.artifacts &&\n    node.artifacts.annotations.length > 0 &&\n    node.artifacts.annotations[0].annotation.length > 0\n  ) {\n    annotate = node.artifacts.annotations[0].annotation;\n  }\n\n  label = node.label;\n\n  if (annotate.length > 20) annotate = `${annotate.substr(0, 20)}..`;\n\n  if (label.length > 20) label = `${label.substr(0, 20)}..`;\n\n  return (\n    <Animate\n      start={{ opacity: 0 }}\n      enter={{\n        opacity: [1],\n      }}\n    >\n      {() => (\n        <>\n          <g style={{ opacity: 1 }}>\n            {glyph}\n\n            <text\n              y={0}\n              x={20}\n              dominantBaseline=\"middle\"\n              textAnchor=\"start\"\n              fontSize={textSize}\n              fontWeight={'bold'}\n            >\n              {label}\n            </text>\n\n            <text\n              y={20}\n              x={dropDownAdded ? 10 : 0}\n              dominantBaseline=\"middle\"\n              textAnchor=\"start\"\n              fontSize={textSize}\n              fontWeight={'regular'}\n            >\n              {annotate}\n            </text>\n          </g>\n        </>\n      )}\n    </Animate>\n  );\n}\n\nexport default BookmarkNode;\n","/* eslint-disable no-plusplus */\nexport default function BookmarkTransitions(\n  xOffset: number,\n  yOffset: number,\n  nodeList: any[]\n) {\n  xOffset = -xOffset;\n\n  const start = (data: any) => {\n    const index = nodeList.findIndex(d => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return { x, y: y - yOffset, opacity: 0 };\n  };\n\n  const enter = (data: any) => {\n    const index = nodeList.findIndex(d => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n    };\n  };\n\n  const update = (data: any) => {\n    const index = nodeList.findIndex(d => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","import { NodeID, ProvenanceGraph } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { NodeGroup } from 'react-move';\nimport { EventConfig } from '../Utils/EventConfig';\nimport translate from '../Utils/translate';\nimport BookmarkNode from './BookmarkNode';\nimport BookmarkTransitions from './BookmarkTransitions';\n\nexport interface BookmarkListViewConfig<T, S extends string, A> {\n  graph?: ProvenanceGraph<S, A>;\n  eventConfig?: EventConfig<S>;\n  currentNode: NodeID;\n}\n\nfunction BookmarkListView<T, S extends string, A>({\n  graph,\n  eventConfig,\n  currentNode,\n}: BookmarkListViewConfig<T, S, A>) {\n  if (graph === undefined) {\n    return null;\n  }\n\n  const gutter = 15;\n  const verticalSpace = 50;\n\n  const bookmarks = [];\n\n  const xOffset = gutter;\n  const yOffset = verticalSpace;\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const j in graph.nodes) {\n    if (graph.nodes[j].bookmarked) {\n      bookmarks.push(graph.nodes[j]);\n    }\n  }\n\n  return (\n    <NodeGroup\n      data={bookmarks}\n      keyAccessor={(d) => d.label}\n      {...BookmarkTransitions(xOffset, yOffset, bookmarks)}\n    >\n      {(innerBookmarks) => (\n        <>\n          {innerBookmarks.map((bookmark) => {\n            const { data: d, key, state } = bookmark;\n\n            return (\n              <g key={key} transform={translate(state.x, state.y)}>\n                <BookmarkNode\n                  current={currentNode === d.id}\n                  node={d}\n                  nodeMap={innerBookmarks}\n                  editAnnotations={false}\n                  eventConfig={eventConfig}\n                />\n              </g>\n            );\n          })}\n        </>\n      )}\n    </NodeGroup>\n  );\n}\n\nexport default BookmarkListView;\n","export default function linkTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  duration = 500,\n  annotationOpen: number,\n  annotationHeight: number\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  const start = () => ({\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    opacity: 0,\n  });\n\n  const enter = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0\n        ? clusteredNodesInFront\n        : clusteredNodesInFront - 1;\n\n    const { source, target } = data;\n    const x1 = getX(source.width, xOffset, backboneOffset);\n    const x2 = getX(target.width, xOffset, backboneOffset);\n\n    let y1 =\n      yOffset * source.depth -\n      (yOffset - clusterOffset) * clusteredNodesInFront;\n    let y2 =\n      yOffset * target.depth -\n      (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (\n      annotationOpen !== -1 &&\n      source.depth > annotationOpen &&\n      source.width === 0\n    ) {\n      y1 += annotationHeight;\n    }\n\n    if (\n      annotationOpen !== -1 &&\n      target.depth > annotationOpen &&\n      target.width === 0\n    ) {\n      y2 += annotationHeight;\n    }\n\n    return {\n      x1,\n      x2,\n      y1,\n      y2,\n      opacity: 1,\n      timing: { duration },\n    };\n  };\n\n  const update = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0\n        ? clusteredNodesInFront\n        : clusteredNodesInFront - 1;\n\n    const { source, target } = data;\n    const x1 = getX(source.width, xOffset, backboneOffset);\n    const x2 = getX(target.width, xOffset, backboneOffset);\n\n    let y1 =\n      yOffset * source.depth -\n      (yOffset - clusterOffset) * clusteredNodesInFront;\n    let y2 =\n      yOffset * target.depth -\n      (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (\n      annotationOpen !== -1 &&\n      source.depth > annotationOpen &&\n      source.width === 0\n    ) {\n      y1 += annotationHeight;\n    }\n\n    if (\n      annotationOpen !== -1 &&\n      target.depth > annotationOpen &&\n      target.width === 0\n    ) {\n      y2 += annotationHeight;\n    }\n\n    return {\n      x1: [x1],\n      y1: [y1],\n      x2: [x2],\n      y2: [y2],\n      opacity: 1,\n      timing: { duration },\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n\nexport function getX(width: number, xOffset: number, backboneOffset: number) {\n  return width > 1\n    ? (xOffset + backboneOffset) * width - backboneOffset\n    : (xOffset + backboneOffset) * width;\n}\n","/* eslint-disable no-plusplus */\nimport { getX } from './LinkTransitions';\nimport { BundleMap } from '../Utils/BundleMap';\n\nexport default function bundleTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  duration = 500,\n  expandedClusterList: string[],\n  stratifiedMap: any,\n  nodeList: any[],\n  annotationOpen: number,\n  annotationHeight: number,\n  bundleMap?: BundleMap\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  const start = () => ({ x: 0, y: 0, opacity: 0 });\n\n  const enter = (data: any) => {\n    const validity = true;\n\n    const x = getX(stratifiedMap[data].width, xOffset, backboneOffset);\n\n    // let backboneBundleNodes = findBackboneBundleNodes(stratifiedMap, bundleMap)\n\n    let highestDepth = stratifiedMap[data].depth;\n    let lowestDepth = stratifiedMap[data].depth;\n\n    if (bundleMap && expandedClusterList.includes(data)) {\n      for (let i = 0; i < bundleMap[data].bunchedNodes.length; i++) {\n        // if(stratifiedMap[bundleMap[data].bunchedNodes[i]].width != 0)\n        // {\n        //   validity = false;\n        // }\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth < highestDepth\n        ) {\n          highestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth > lowestDepth\n        ) {\n          lowestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n      }\n    }\n\n    let y = yOffset * highestDepth;\n\n    if (annotationOpen !== -1 && highestDepth > annotationOpen) {\n      y += annotationHeight;\n    }\n\n    let height = 0;\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const j in bundleMap![data].bunchedNodes) {\n      if (stratifiedMap[bundleMap![data].bunchedNodes[j]]) {\n        height++;\n      }\n    }\n\n    height *= clusterOffset;\n\n    if (!expandedClusterList.includes(data)) {\n      height = 10;\n    }\n\n    if (\n      annotationOpen !== -1 &&\n      annotationOpen >= highestDepth &&\n      annotationOpen <= lowestDepth\n    ) {\n      height += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opacity: [!expandedClusterList.includes(data) ? 0 : 1],\n      timing: { duration },\n      validity,\n      height,\n    };\n  };\n\n  const update = (data: any) => {\n    const validity = true;\n\n    const x = getX(stratifiedMap[data].width, xOffset, backboneOffset);\n\n    // let backboneBundleNodes = findBackboneBundleNodes(stratifiedMap, bundleMap)\n\n    let highestDepth = stratifiedMap[data].depth;\n    let lowestDepth = stratifiedMap[data].depth;\n\n    if (bundleMap && expandedClusterList.includes(data)) {\n      for (let i = 0; i < bundleMap[data].bunchedNodes.length; i++) {\n        // if(stratifiedMap[bundleMap[data].bunchedNodes[i]].width != 0)\n        // {\n        //   validity = false;\n        // }\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth < highestDepth\n        ) {\n          highestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth > lowestDepth\n        ) {\n          lowestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n      }\n    }\n\n    let y = yOffset * highestDepth;\n\n    if (annotationOpen !== -1 && highestDepth > annotationOpen) {\n      y += annotationHeight;\n    }\n\n    let height = 0;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const j in bundleMap![data].bunchedNodes) {\n      if (stratifiedMap[bundleMap![data].bunchedNodes[j]]) {\n        height++;\n      }\n    }\n\n    height *= clusterOffset;\n\n    if (!expandedClusterList.includes(data)) {\n      height = 10;\n    }\n\n    if (\n      annotationOpen !== -1 &&\n      annotationOpen >= highestDepth &&\n      annotationOpen <= lowestDepth\n    ) {\n      height += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opacity: [!expandedClusterList.includes(data) ? 0 : 1],\n      timing: { duration },\n      validity,\n      height: [height],\n    };\n  };\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","import React, { FC } from 'react';\n\ntype LinkProps = {} & React.SVGProps<SVGLineElement>;\n\nconst Link: FC<LinkProps> = (props: LinkProps) => <line {...props} />;\n\nexport default Link;\n","import { getX } from './LinkTransitions';\n\nexport default function nodeTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  duration = 500,\n  annotationOpen: number,\n  annotationHeight: number\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  const start = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0\n        ? clusteredNodesInFront\n        : clusteredNodesInFront - 1;\n\n    let y =\n      yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (\n      annotationOpen !== -1 &&\n      data.depth > annotationOpen &&\n      data.width === 0\n    ) {\n      y += annotationHeight;\n    }\n\n    return { x, y: y - yOffset, opacity: 0 };\n  };\n\n  const enter = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0\n        ? clusteredNodesInFront\n        : clusteredNodesInFront - 1;\n\n    let y =\n      yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (\n      annotationOpen !== -1 &&\n      data.depth > annotationOpen &&\n      data.width === 0\n    ) {\n      y += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n      timing: { duration },\n    };\n  };\n\n  const update = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0\n        ? clusteredNodesInFront\n        : clusteredNodesInFront - 1;\n\n    let y =\n      yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (\n      annotationOpen !== -1 &&\n      data.depth > annotationOpen &&\n      data.width === 0\n    ) {\n      y += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n      timing: { duration },\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","import { ProvenanceGraph } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { Button } from 'semantic-ui-react';\nimport { style } from 'typestyle';\n\nexport interface UndoRedoConfig<T, S extends string, A> {\n  undoCallback: () => void;\n  redoCallback: () => void;\n  graph?: ProvenanceGraph<S, A>;\n}\n\nfunction UndoRedoButton<T, S extends string, A>({\n  graph,\n  undoCallback,\n  redoCallback,\n}: UndoRedoConfig<T, S, A>) {\n  if (graph === undefined) {\n    return null;\n  }\n\n  const isAtRoot = graph.root === graph.current;\n  const isAtLatest = graph.nodes[graph.current].children.length === 0;\n\n  const margin = {\n    marginRight: '3px',\n  } as React.CSSProperties;\n\n  return (\n    <div>\n      <Button\n        variant=\"outlined\"\n        className={undoButtonStyle}\n        disabled={isAtRoot}\n        onClick={undoCallback}\n      >\n        <i style={margin} className=\"fas fa-undo marginRight\"></i>\n        Undo\n      </Button>\n\n      <Button\n        variant=\"outlined\"\n        className={redoButtonStyle}\n        disabled={isAtLatest}\n        onClick={redoCallback}\n      >\n        <i style={margin} className=\"fas fa-redo marginRight\"></i>\n        Redo\n      </Button>\n    </div>\n  );\n}\n\nconst undoButtonStyle = style({\n  marginTop: '2px',\n  borderRadius: '2px',\n  display: 'inline-block',\n  cursor: 'pointer',\n  fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif',\n  fontSize: '14px',\n  marginRight: '1px',\n  $nest: {\n    '&:hover': {\n      backgroundColor: '#6c7c7c',\n    },\n    '&:active': {\n      backgroundColor: '#6c7c7c',\n    },\n  },\n});\n\nconst redoButtonStyle = style({\n  marginTop: '2px',\n  borderRadius: '2px',\n  display: 'inline-block',\n  cursor: 'pointer',\n  fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif',\n  fontSize: '14px',\n\n  $nest: {\n    '&:hover': {\n      backgroundColor: '#6c7c7c',\n    },\n\n    '&:active': {\n      backgroundColor: '#6c7c7c',\n    },\n  },\n});\n\nexport default UndoRedoButton;\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\n/* eslint-disable no-unused-vars */\nimport {\n  DiffNode,\n  isChildNode,\n  NodeID,\n  Nodes,\n  Provenance,\n  ProvenanceNode,\n  StateNode,\n} from '@visdesignlab/trrack';\nimport {\n  HierarchyNode,\n  stratify,\n  symbol,\n  symbolCircle,\n  symbolCross,\n  symbolDiamond,\n  symbolSquare,\n  symbolStar,\n  symbolTriangle,\n  symbolWye,\n} from 'd3';\nimport React, { ReactChild, useEffect, useState } from 'react';\nimport { NodeGroup } from 'react-move';\nimport { Popup, Tab } from 'semantic-ui-react';\nimport { style } from 'typestyle';\nimport { BundleMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\nimport findBundleParent from '../Utils/findBundleParent';\nimport translate from '../Utils/translate';\nimport { treeLayout } from '../Utils/TreeLayout';\nimport BackboneNode from './BackboneNode';\nimport BookmarkListView from './BookmarkListView';\nimport bundleTransitions from './BundleTransitions';\nimport Link from './Link';\nimport linkTransitions from './LinkTransitions';\nimport nodeTransitions from './NodeTransitions';\nimport { treeColor } from './Styles';\nimport UndoRedoButton from './UndoRedoButton';\n\ninterface ProvVisProps<T, S extends string, A> {\n  root: NodeID;\n  sideOffset?: number;\n  iconOnly?: boolean;\n  current: NodeID;\n  nodeMap: Nodes<S, A>;\n  backboneGutter?: number;\n  gutter?: number;\n  verticalSpace?: number;\n  annotationHeight?: number;\n  clusterVerticalSpace?: number;\n  regularCircleRadius?: number;\n  backboneCircleRadius?: number;\n  regularCircleStroke?: number;\n  backboneCircleStroke?: number;\n  topOffset?: number;\n  textSize?: number;\n  height?: number;\n  width?: number;\n  linkWidth?: number;\n  duration?: number;\n  clusterLabels?: boolean;\n  bundleMap?: BundleMap;\n  eventConfig?: EventConfig<S>;\n  changeCurrent?: (id: NodeID) => void;\n  popupContent?: (nodeId: StateNode<S, A>) => ReactChild;\n  annotationContent?: (nodeId: StateNode<S, A>) => ReactChild;\n  undoRedoButtons?: boolean;\n  bookmarkToggle?: boolean;\n  bookmarkListView?: boolean;\n  editAnnotations?: boolean;\n  prov?: Provenance<T, S, A>;\n  ephemeralUndo?: boolean;\n}\n\nexport type StratifiedMap<T, S, A> = {\n  [key: string]: HierarchyNode<ProvenanceNode<S, A>>;\n};\n\nexport type StratifiedList<T, S, A> = HierarchyNode<ProvenanceNode<S, A>>[];\n\nfunction ProvVis<T, S extends string, A>({\n  nodeMap,\n  root,\n  current,\n  changeCurrent,\n  width = 400,\n  height = 800,\n  iconOnly = false,\n  gutter = 15,\n  backboneGutter = 20,\n  verticalSpace = 50,\n  annotationHeight = 100,\n  clusterVerticalSpace = 50,\n  regularCircleRadius = 4,\n  backboneCircleRadius = 5,\n  regularCircleStroke = 3,\n  backboneCircleStroke = 3,\n  sideOffset = 200,\n  topOffset = 30,\n  textSize = 15,\n  linkWidth = 4,\n  duration = 600,\n  clusterLabels = true,\n  bundleMap = {},\n  eventConfig,\n  popupContent,\n  annotationContent,\n  editAnnotations = false,\n  prov,\n  ephemeralUndo = false,\n}: ProvVisProps<T, S, A>) {\n  const [first, setFirst] = useState(true);\n  const [bookmark, setBookmark] = useState<any>(null);\n  const [annotationOpen, setAnnotationOpen] = useState(-1);\n  const [tabsValue, setValue] = useState(0);\n\n  let list: string[] = [];\n  const eventTypes = new Set<string>();\n  for (const j in nodeMap) {\n    const child = nodeMap[j];\n    if (isChildNode(child)) {\n      if (child.metadata.eventType) {\n        eventTypes.add(child.metadata.eventType);\n      }\n\n      if (\n        child.actionType === 'Ephemeral' &&\n        child.children.length === 1 &&\n        (nodeMap[child.parent].actionType !== 'Ephemeral' ||\n          nodeMap[child.parent].children.length > 1)\n      ) {\n        const group: string[] = [];\n        let curr = child;\n        while (curr.actionType === 'Ephemeral') {\n          group.push(curr.id);\n          if (\n            curr.children.length === 1 &&\n            nodeMap[curr.children[0]].actionType === 'Ephemeral'\n          ) {\n            curr = nodeMap[curr.children[0]] as DiffNode<S, A>;\n          } else {\n            break;\n          }\n        }\n\n        bundleMap[child.id] = {\n          metadata: '',\n          bundleLabel: '',\n          bunchedNodes: group,\n        };\n      }\n    }\n  }\n\n  if (bundleMap) {\n    list = list.concat(Object.keys(bundleMap));\n  }\n\n  function setDefaultConfig<E extends string>(\n    types: Set<string>\n  ): EventConfig<E> {\n    const symbols = [\n      symbol().type(symbolStar).size(50),\n      symbol().type(symbolDiamond),\n      symbol().type(symbolTriangle),\n      symbol().type(symbolCircle),\n      symbol().type(symbolCross),\n      symbol().type(symbolSquare),\n      symbol().type(symbolWye),\n    ];\n\n    // Find nodes in the clusters whose entire cluster is on the backbone.\n    const conf: EventConfig<E> = {};\n    let counter = 0;\n\n    for (const j of types) {\n      conf[j] = {};\n      conf[j].backboneGlyph = (\n        <path\n          strokeWidth={2}\n          className={treeColor(false)}\n          d={symbols[counter]()!}\n        />\n      );\n\n      conf[j].bundleGlyph = (\n        <path\n          strokeWidth={2}\n          className={treeColor(false)}\n          d={symbols[counter]()!}\n        />\n      );\n\n      conf[j].currentGlyph = (\n        <path\n          strokeWidth={2}\n          className={treeColor(true)}\n          d={symbols[counter]()!}\n        />\n      );\n\n      conf[j].regularGlyph = (\n        <path\n          strokeWidth={2}\n          className={treeColor(false)}\n          d={symbols[counter]()!}\n        />\n      );\n\n      counter += 1;\n    }\n\n    return conf;\n  }\n\n  const [expandedClusterList, setExpandedClusterList] = useState<string[]>(\n    Object.keys(bundleMap)\n  );\n\n  if (!eventConfig && eventTypes.size > 0 && eventTypes.size < 8) {\n    eventConfig = setDefaultConfig<S>(eventTypes);\n  }\n\n  useEffect(() => {\n    setFirst(false);\n  }, []);\n\n  const nodeList = Object.values(nodeMap).filter(() => true);\n\n  const copyList = Array.from(nodeList);\n\n  const keys = bundleMap ? Object.keys(bundleMap) : [];\n\n  // Find a list of all nodes included in a bundle.\n  let bundledNodes: string[] = [];\n\n  if (bundleMap) {\n    for (const key of keys) {\n      bundledNodes = bundledNodes.concat(bundleMap[key].bunchedNodes);\n      bundledNodes.push(key);\n    }\n  }\n\n  const strat = stratify<ProvenanceNode<S, A>>()\n    .id((d) => d.id)\n    .parentId((d) => {\n      if (d.id === root) return null;\n\n      if (isChildNode(d)) {\n        // If you are a unexpanded bundle, find your parent by going straight up.\n        if (\n          bundleMap &&\n          Object.keys(bundleMap).includes(d.id) &&\n          !expandedClusterList.includes(d.id)\n        ) {\n          let curr = d;\n\n          // eslint-disable-next-line no-constant-condition\n          while (true) {\n            const localCurr = curr;\n\n            if (\n              !bundledNodes.includes(localCurr.parent) ||\n              Object.keys(bundleMap).includes(localCurr.parent)\n            ) {\n              return localCurr.parent;\n            }\n\n            const temp = copyList.filter((c) => c.id === localCurr.parent)[0];\n\n            if (isChildNode(temp)) {\n              curr = temp;\n            }\n          }\n        }\n\n        const bundleParents = findBundleParent(d.parent, bundleMap);\n        let collapsedParent;\n\n        let allExpanded = true;\n\n        for (const j in bundleParents) {\n          if (!expandedClusterList.includes(bundleParents[j])) {\n            allExpanded = false;\n            collapsedParent = bundleParents[j];\n            break;\n          }\n        }\n\n        if (\n          bundledNodes.includes(d.parent) &&\n          bundleMap &&\n          !Object.keys(bundleMap).includes(d.parent) &&\n          !allExpanded\n        ) {\n          return collapsedParent;\n        }\n\n        return d.parent;\n      }\n      return null;\n    });\n\n  for (let i = 0; i < nodeList.length; i++) {\n    const bundleParents = findBundleParent(nodeList[i].id, bundleMap);\n\n    let allExpanded = true;\n\n    for (const j in bundleParents) {\n      if (!expandedClusterList.includes(bundleParents[j])) {\n        allExpanded = false;\n        break;\n      }\n    }\n\n    if (\n      bundledNodes.includes(nodeList[i].id) &&\n      !allExpanded &&\n      bundleMap &&\n      !Object.keys(bundleMap).includes(nodeList[i].id)\n    ) {\n      nodeList.splice(i, 1);\n      i--;\n    }\n  }\n\n  const stratifiedTree = strat(nodeList);\n\n  // //console.log(JSON.parse(JSON.stringify(stratifiedTree)));\n\n  const stratifiedList: StratifiedList<T, S, A> = stratifiedTree.descendants();\n  const stratifiedMap: StratifiedMap<T, S, A> = {};\n\n  stratifiedList.forEach((c) => {\n    stratifiedMap[c.id!] = c;\n  });\n  treeLayout(stratifiedMap, current, root);\n\n  let maxHeight = 0;\n  let maxWidth = 0;\n\n  for (const j in stratifiedList) {\n    if (stratifiedList[j].depth > maxHeight) {\n      maxHeight = stratifiedList[j].depth;\n    }\n\n    if ((stratifiedList[j] as any).width > maxWidth) {\n      maxWidth = (stratifiedList[j] as any).width;\n    }\n  }\n\n  const links = stratifiedTree.links();\n\n  const xOffset = gutter;\n  const yOffset = verticalSpace;\n\n  function regularGlyph(node: ProvenanceNode<S, A>) {\n    if (eventConfig) {\n      const { eventType } = node.metadata;\n      if (\n        eventType &&\n        eventType in eventConfig &&\n        eventType !== 'Root' &&\n        eventConfig[eventType].regularGlyph\n      ) {\n        return eventConfig[eventType].regularGlyph;\n      }\n    }\n    return (\n      <circle\n        r={regularCircleRadius}\n        strokeWidth={regularCircleStroke}\n        className={treeColor(false)}\n      />\n    );\n  }\n\n  function bundleGlyph(node: ProvenanceNode<S, A>) {\n    if (eventConfig) {\n      const { eventType } = node.metadata;\n      if (eventType && eventType in eventConfig && eventType !== 'Root') {\n        return eventConfig[eventType].bundleGlyph;\n      }\n    }\n\n    return (\n      <circle\n        r={regularCircleRadius}\n        strokeWidth={regularCircleStroke}\n        className={treeColor(false)}\n      />\n    );\n  }\n\n  let shiftLeft = 0;\n\n  if (maxWidth === 0) {\n    shiftLeft = 30;\n  } else if (maxWidth === 1) {\n    shiftLeft = 52;\n  } else if (maxWidth > 1) {\n    shiftLeft = 74;\n  }\n\n  const svgWidth = width;\n\n  const overflowStyle = {\n    overflowX: 'auto',\n    overflowY: 'auto',\n  } as React.CSSProperties;\n\n  const tabsStyle = {\n    backgroundColor: 'lightgrey',\n    width: '270px',\n  } as React.CSSProperties;\n\n  const bookmarkTabView = (\n    <svg\n      style={{ overflow: 'visible' }}\n      height={maxHeight < height ? height : maxHeight}\n      width={svgWidth}\n      id=\"bookmarkView\"\n    >\n      <g id={'globalG'} transform={translate(shiftLeft, topOffset)}>\n        <BookmarkListView\n          graph={prov ? prov.graph : undefined}\n          eventConfig={eventConfig}\n          currentNode={current}\n        />\n      </g>\n    </svg>\n  );\n\n  const graphTabView = (\n    <div>\n      <div id=\"undoRedoDiv\">\n        <UndoRedoButton\n          graph={prov ? prov.graph : undefined}\n          undoCallback={() => {\n            if (prov) {\n              if (ephemeralUndo) {\n                prov.goBackToNonEphemeral();\n              } else {\n                prov.goBackOneStep();\n              }\n            }\n          }}\n          redoCallback={() => {\n            if (prov) {\n              if (ephemeralUndo) {\n                prov.goForwardToNonEphemeral();\n              } else {\n                prov.goForwardOneStep();\n              }\n            }\n          }}\n        />\n      </div>\n\n      <svg\n        style={{ overflow: 'visible' }}\n        id={'topSvg'}\n        height={maxHeight < height ? height : maxHeight}\n        width={svgWidth}\n      >\n        <rect height={height} width={width} fill=\"none\" stroke=\"none\" />\n        <g id={'globalG'} transform={translate(shiftLeft, topOffset)}>\n          <NodeGroup\n            data={links}\n            keyAccessor={(link) => `${link.source.id}${link.target.id}`}\n            {...linkTransitions(\n              xOffset,\n              yOffset,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              annotationOpen,\n              annotationHeight\n            )}\n          >\n            {(linkArr) => (\n              <>\n                {linkArr.map((link) => {\n                  const { key, state } = link;\n\n                  return (\n                    <g key={key}>\n                      <Link\n                        {...state}\n                        fill={'#ccc'}\n                        stroke={'#ccc'}\n                        strokeWidth={linkWidth}\n                      />\n                    </g>\n                  );\n                })}\n              </>\n            )}\n          </NodeGroup>\n          <NodeGroup\n            data={stratifiedList}\n            keyAccessor={(d) => d.id}\n            {...nodeTransitions(\n              xOffset,\n              yOffset,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              annotationOpen,\n              annotationHeight\n            )}\n          >\n            {(nodes) => (\n              <>\n                {nodes.map((node) => {\n                  const { data: d, key, state } = node;\n                  const popupTrigger = (\n                    <g\n                      key={key}\n                      onClick={() => {\n                        if (changeCurrent) {\n                          changeCurrent(d.id);\n                        }\n                      }}\n                      onMouseOver={() => {\n                        setBookmark(d.id);\n                      }}\n                      onMouseOut={() => {\n                        setBookmark(null);\n                      }}\n                      transform={\n                        d.width === 0\n                          ? translate(state.x, state.y)\n                          : translate(state.x, state.y)\n                      }\n                    >\n                      {d.width === 0 && prov ? (\n                        <g>\n                          <rect\n                            width=\"200\"\n                            height=\"25\"\n                            transform=\"translate(0, -12.5)\"\n                            opacity=\"0\"\n                          ></rect>\n                          ,\n                          <BackboneNode\n                            prov={prov}\n                            textSize={textSize}\n                            iconOnly={iconOnly}\n                            radius={backboneCircleRadius}\n                            strokeWidth={backboneCircleStroke}\n                            duration={duration}\n                            first={first}\n                            current={current === d.id}\n                            node={d.data}\n                            setBookmark={setBookmark}\n                            bookmark={bookmark}\n                            bundleMap={bundleMap}\n                            nodeMap={stratifiedMap}\n                            clusterLabels={clusterLabels}\n                            annotationOpen={annotationOpen}\n                            setAnnotationOpen={setAnnotationOpen}\n                            exemptList={expandedClusterList}\n                            editAnnotations={editAnnotations}\n                            setExemptList={setExpandedClusterList}\n                            eventConfig={eventConfig}\n                            annotationContent={annotationContent}\n                            popupContent={popupContent}\n                            expandedClusterList={expandedClusterList}\n                          />\n                        </g>\n                      ) : popupContent !== undefined ? (\n                        <Popup\n                          content={popupContent(d.data)}\n                          trigger={\n                            <g\n                              onClick={() => {\n                                setAnnotationOpen(-1);\n                              }}\n                            >\n                              {keys.includes(d.id)\n                                ? bundleGlyph(d.data)\n                                : regularGlyph(d.data)}\n                            </g>\n                          }\n                        />\n                      ) : (\n                        <g\n                          onClick={() => {\n                            setAnnotationOpen(-1);\n                          }}\n                        >\n                          {regularGlyph(d.data)}\n                        </g>\n                      )}\n                    </g>\n                  );\n\n                  return popupTrigger;\n                })}\n              </>\n            )}\n          </NodeGroup>\n          <NodeGroup\n            data={keys}\n            keyAccessor={(key) => `${key}`}\n            {...bundleTransitions(\n              xOffset,\n              verticalSpace,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              expandedClusterList,\n              stratifiedMap,\n              stratifiedList,\n              annotationOpen,\n              annotationHeight,\n              bundleMap\n            )}\n          >\n            {(bundle) => (\n              <>\n                {bundle.map((b) => {\n                  const { key, state } = b;\n                  if (\n                    bundleMap === undefined ||\n                    (stratifiedMap[b.key] as any).width !== 0 ||\n                    state.validity === false\n                  ) {\n                    return null;\n                  }\n\n                  return (\n                    <g\n                      key={key}\n                      transform={translate(\n                        state.x - gutter + 5,\n                        state.y - clusterVerticalSpace / 2\n                      )}\n                    >\n                      <rect\n                        style={{ opacity: state.opacity }}\n                        width={iconOnly ? 42 : sideOffset - 15}\n                        height={state.height}\n                        rx=\"10\"\n                        ry=\"10\"\n                        fill=\"none\"\n                        strokeWidth=\"2px\"\n                        stroke=\"rgb(248, 191, 132)\"\n                      ></rect>\n                    </g>\n                  );\n                })}\n              </>\n            )}\n          </NodeGroup>\n        </g>\n      </svg>\n    </div>\n  );\n\n  const panes = [\n    {\n      menuItem: { key: 'Graph', icon: 'share alternate', content: 'Graph' },\n      render: () => <Tab.Pane attached={false}>{graphTabView}</Tab.Pane>,\n    },\n    {\n      menuItem: {\n        key: 'Bookmarks/Annotations',\n        icon: 'bookmark',\n        content: 'Bookmarks/Annotations',\n      },\n      render: () => <Tab.Pane attached={false}>{bookmarkTabView}</Tab.Pane>,\n    },\n  ];\n\n  return (\n    <div style={overflowStyle} className={container} id=\"prov-vis\">\n      <Tab menu={{ secondary: true, pointing: true }} panes={panes} />\n    </div>\n  );\n}\n\nexport default ProvVis;\n\nconst container = style({\n  alignItems: 'center',\n  justifyContent: 'center',\n  overflow: 'auto',\n});\n","/* eslint-disable no-unused-vars */\nimport { NodeID, Provenance, ProvenanceGraph } from '@visdesignlab/trrack';\nimport { configure } from 'mobx';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BundleMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\nimport ProvVis from './ProvVis';\nimport UndoRedoButton from './UndoRedoButton';\n\nexport interface ProvVisConfig {\n  eventConfig: EventConfig<any>;\n  editAnnotations: boolean;\n  bundleMap: BundleMap;\n  iconOnly: boolean;\n  iconSize: number;\n  height: number;\n  width: number;\n  sideOffset: number;\n  backboneGutter: number;\n  gutter: number;\n  verticalSpace: number;\n  regularCircleRadius: number;\n  backboneCircleRadius: number;\n  regularCircleStroke: number;\n  backboneCircleStroke: number;\n  topOffset: number;\n  textSize: number;\n  linkWidth: number;\n  duration: number;\n}\nconfigure({ isolateGlobalState: true });\nexport function ProvVisCreator<T, S extends string, A>(\n  node: Element,\n  prov: Provenance<T, S, A>,\n  callback?: (id: NodeID) => void,\n  buttons = true,\n  ephemeralUndo = false,\n  fauxRoot: NodeID = prov.graph.root,\n  config: Partial<ProvVisConfig> = {}\n) {\n  prov.addGlobalObserver(() => {\n    ReactDOM.render(\n      <ProvVis\n        {...config}\n        root={fauxRoot}\n        changeCurrent={callback}\n        current={prov.graph.current}\n        nodeMap={prov.graph.nodes}\n        prov={prov}\n        undoRedoButtons={true}\n        ephemeralUndo={ephemeralUndo}\n      />,\n      node\n    );\n  });\n\n  ReactDOM.render(\n    <ProvVis\n      {...config}\n      root={fauxRoot}\n      changeCurrent={callback}\n      current={prov.graph.current}\n      nodeMap={prov.graph.nodes}\n      prov={prov}\n      undoRedoButtons={true}\n      ephemeralUndo={ephemeralUndo}\n    />,\n    node\n  );\n}\n\nexport function UndoRedoButtonCreator<T, S extends string, A>(\n  node: Element,\n  graph: ProvenanceGraph<S, A>,\n  undoCallback: () => void,\n  redoCallback: () => void\n) {\n  ReactDOM.render(\n    <UndoRedoButton\n      graph={graph}\n      undoCallback={undoCallback}\n      redoCallback={redoCallback}\n    />,\n    node\n  );\n}\n"],"names":["findBundleParent","nodeId","bundleMap","parentList","bundle","bunchedNodes","includes","push","translate","x","y","treeLayout","nodes","current","root","depthMap","currentPath","getPathTo","DFS","node","explored","Set","toExplore","currDepth","length","temp","pop","has","id","width","add","children","sort","a","b","aIncludes","bIncludes","from","to","path","search","reverse","final","child","treeColor","style","fill","stroke","BackboneNode","prov","first","iconOnly","duration","radius","strokeWidth","textSize","nodeMap","annotationOpen","bookmark","setAnnotationOpen","exemptList","setExemptList","eventConfig","popupContent","editAnnotations","annotationContent","expandedClusterList","padding","cursorStyle","cursor","useState","getLatestAnnotation","annotation","annotateText","setAnnotateText","handleCheck","lastAnnotation","trim","addAnnotation","handleClose","handleInputChange","glyph","React","className","r","dropDownAdded","eventType","metadata","bundleGlyph","currentGlyph","backboneGlyph","Object","keys","fontWeight","label","annotate","actionType","artifacts","annotations","depth","substr","labelG","opacity","transform","onClick","e","nodeClicked","fontSize","textAnchor","alignmentBaseline","fontFamily","dominantBaseline","labelClicked","setBookmark","getBookmark","stopPropagation","Animate","start","enter","timing","delay","undefined","Popup","content","trigger","height","maxWidth","resize","onChange","value","innerNode","event","exemptCopy","Array","splice","findIndex","d","BookmarkNode","BookmarkTransitions","xOffset","yOffset","nodeList","data","index","opactiy","update","leave","BookmarkListView","graph","currentNode","gutter","verticalSpace","bookmarks","j","bookmarked","NodeGroup","keyAccessor","innerBookmarks","map","key","state","linkTransitions","clusterOffset","backboneOffset","annotationHeight","x1","x2","y1","y2","clusteredNodesInFront","source","target","getX","bundleTransitions","stratifiedMap","validity","highestDepth","lowestDepth","i","Link","props","nodeTransitions","UndoRedoButton","undoCallback","redoCallback","isAtRoot","isAtLatest","margin","marginRight","Button","variant","undoButtonStyle","disabled","redoButtonStyle","marginTop","borderRadius","display","$nest","backgroundColor","ProvVis","changeCurrent","backboneGutter","clusterVerticalSpace","regularCircleRadius","backboneCircleRadius","regularCircleStroke","backboneCircleStroke","sideOffset","topOffset","linkWidth","clusterLabels","ephemeralUndo","setFirst","list","eventTypes","isChildNode","parent","group","curr","bundleLabel","concat","setDefaultConfig","types","symbols","symbol","type","symbolStar","size","symbolDiamond","symbolTriangle","symbolCircle","symbolCross","symbolSquare","symbolWye","conf","counter","regularGlyph","setExpandedClusterList","useEffect","values","filter","copyList","bundledNodes","strat","stratify","parentId","localCurr","c","bundleParents","collapsedParent","allExpanded","stratifiedTree","stratifiedList","descendants","forEach","maxHeight","links","shiftLeft","svgWidth","overflowStyle","overflowX","overflowY","bookmarkTabView","overflow","graphTabView","goBackToNonEphemeral","goBackOneStep","goForwardToNonEphemeral","goForwardOneStep","link","linkArr","popupTrigger","onMouseOver","onMouseOut","rx","ry","panes","menuItem","icon","render","Tab","Pane","attached","container","menu","secondary","pointing","alignItems","justifyContent","configure","isolateGlobalState","ProvVisCreator","callback","buttons","fauxRoot","config","addGlobalObserver","ReactDOM","undoRedoButtons","UndoRedoButtonCreator"],"mappings":"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"}